<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Introduction</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Maddy Kline BST260 Final Project 2022</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Introduction</a>
</li>
<li>
  <a href="Mapping.html">Mapping</a>
</li>
<li>
  <a href="Models.html">Models</a>
</li>
<li>
  <a href="conclusions.html">Conclusions</a>
</li>
<li>
  <a href="references.html">References</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Introduction</h1>

</div>


<p>Streptococcal pharyngitis, known colloquially as “strep throat,” is
the number one cause of pharyngitis in children, accounting for 15-30%
of pharyngitis between the ages of 5-15, and up to as many as 35-40% of
cases during the winter and early spring. There is an estimated
prevalence of 37% among children[1][2][3] . Symptoms typically include a
characteristic sore throat, sometimes alongside fever, abdominal pain,
or headache. Streptococcal pharyngitis is caused by group A
<em>Streptococcus</em>, or <em>Streptococcus pyogenes</em>, and is
clearly diagnosed with the rapid antigen detection test, throat culture,
or NAAT. Treatment with the appropriate penicillin antibiotics is
recommended to decrease the chance of some complications, including
acute rheumatic fever, which can cause lasting cardiac valvular damage.
There are known geographic patterns across the US for some other
respiratory illnesses, including influenza, which starts in the
Southeast and subsequently rises in other parts of the country [4].
Comparatively little is known about the geographic distribution of
streptococcal pharyngitis in the US.<br />
The MarketScan database, comprised of insurance claims data from private
insurers across the US, provides an opportunity to investigate the
distribution of streptococcal pharyngitis in the US. Claims data for
streptococcal pharyngitis were extracted from MarketScan, separated by
year from 2010 to 2018, month, sex, age group (by decile with the
youngest age group split between 0-4 and 5-9), and state. Data for flu
with the same properties were also extracted from MarketScan for
comparison, and vaccination data for flu and PCV were obtained through
CDC FluVax and ChildVax respectively. The question we seek to address is
whether rates of streptococcal pharyngitis are different in different
parts of the country throughout the year and across years, and if so,
what factors contribute to these differences.</p>
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>We can see from this graph that the cases per person of streptococcal
pharyngitis are relatively stable from year to year between 2010-2018,
with slightly more cases in 2011 and 2016-217. We next separate by
age.</p>
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Here we see that streptococcal pharyngitis is most common in 5-9 year
olds, followed by 0-4 year olds, then 10-19 year olds, and there are not
many cases in people older than 20, which is consistent with the known
age distribution of streptococcal pharyngitis as stated above.<br />
We can split this data by region to see if there are trends that differ
in different parts of the country. We divide the country into 4 regions,
Northeast (comprised of Connecticut, Massachusetts, Maine, New
Hampshire, Rhode Island, Vermont, New Jersey, New York, and
Pennsylvania), Midwest (comprised of Illinois, Indiana, Michigan, Ohio,
Wisconsin, Iowa, Kansas, Minnesota, Missouri, Nebraska, North Dakota,
and South Dakata), South (comprised of Delaware, Florida, Georgia,
Maryland, North Carolina, South Carolina, Virginia, West Virginia,
Alabama, Kentucky, Mississippi, Tennessee, Arizona, Louisiana, Oklahoma,
and Texas), and West (comprised of Arizona, Colorado, Indiana, Montana,
Nevada, New Mexico, Utah, Wyoming, Arkansas, California, Hawaii, Oregon,
and Washington).
<img src="index_files/figure-html/unnamed-chunk-3-1.png" width="960" />
From this plot we can see that streptococcal pharyngitis cases are
generally higher in the South, and lower in the West, and that this
trend holds across time. We can further stratify case data by month to
see if there are differences in trends throughout the year by
region.</p>
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
<p>We see that the West has fewer cases of streptococcal pharyngitis
throughout the year. The South tracks pretty well with the Northeast and
Midwest through the beginning of the year, but cases rise earlier and
higher starting at the end of the summer and into the fall. My analysis
will seek to identify what factors drive this regional difference in
case rates.</p>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(stringr)
library(ggplot2)
library(usmap)
library(gridExtra)
library(maps)
library(mapdata)
library(ggmap)
library(lmtest)

#Read in data on cases
dat &lt;- read_csv(&quot;/Users/madeleinekline/Dropbox (Harvard University)/G1/GradLab/StrepPharyngitis/output/GeoVisits.csv&quot;)

#Read in data on membership
coh &lt;- read_csv(&quot;/Users/madeleinekline/Dropbox (Harvard University)/G1/GradLab/StrepPharyngitis/output/GeoCohort.csv&quot;)
#this dataframe has population by sex, age group, and state but not by month. So need to add it to the other dataframe once already collapsed by year. 

#get data by year, rather than by month:
by_year &lt;- aggregate(NVISITS ~ YEAR + STATE + SEX + AGEGRP + PRIMARYCOND, dat, sum)
#we can then join this with the population data from cohort
by_year &lt;- left_join(by_year, coh)

by_year |&gt; group_by(YEAR) |&gt; summarize(total_vis = sum(NVISITS), total_memb = sum(NMEMB), CI = round(total_vis/total_memb,4)) |&gt; ggplot(aes(x=YEAR, y = CI)) + geom_bar(stat = &quot;identity&quot;, fill = &quot;steelblue&quot;) + theme_bw() + geom_text(aes(label=CI), vjust=1.6, color=&quot;white&quot;, size=2.0) + ylab(&quot;Cases per person&quot;) +  ggtitle(&quot;Total Strep Pharyngitis Visits per Member by Year US&quot;)


#let&#39;s summarize cumulative incidence by state across years to start
by_state &lt;- by_year |&gt;
  group_by(YEAR, STATE) |&gt;
  summarize(visits = sum(NVISITS), members = sum(NMEMB), CI = visits/members)

#we now manipulate the data slightly to show CI per hundred, and make the state names match the mapping dataframe
strep_all &lt;- by_state |&gt; mutate(region = tolower(STATE), CI_per_hundred = CI*100) |&gt;
  select(region, CI_per_hundred)



#now we add region designations for &quot;northeast&quot;, &quot;south&quot;, &quot;midwest&quot;, and &quot;west&quot;
#add regions to this dataframe
#make a function that converts lists of state abbreviations to lists of state names
to_statename &lt;- function(list){
  new_list &lt;- c()
  for(i in 1:length(list)){
    name &lt;- state.name[grep(list[i], state.abb)] 
    new_list &lt;- append(new_list, name)
  }
  new_list
}

northeast_states &lt;- tolower(to_statename(.northeast_region))
midwest_states &lt;- tolower(to_statename(.midwest_region))
south_states &lt;- tolower(to_statename(.south_region))
west_states &lt;- tolower(to_statename(.west_region))

northeast_df &lt;- data.frame(region = northeast_states, part = &quot;northeast&quot;) 
midwest_df &lt;- data.frame(region = midwest_states, part = &quot;midwest&quot;)   
south_df &lt;- data.frame(region = south_states, part = &quot;south&quot;) 
west_df &lt;- data.frame(region = west_states, part = &quot;west&quot;)
#will put dc in the south because maryland and viriginia are
dc_df &lt;- data.frame(region = &quot;washington dc&quot;, part = &quot;south&quot;)


state_parts &lt;- rbind(northeast_df, midwest_df, south_df, west_df, dc_df)


strep_all_region &lt;- left_join(strep_all, state_parts, by = &quot;region&quot;)

#now we look at the data by age group across all regions
by_year &lt;- by_year |&gt; mutate(&quot;state&quot; = STATE)
by_year_age_visits &lt;- aggregate(NVISITS ~ YEAR + state + AGEGRP + PRIMARYCOND, dat = by_year, sum)
by_year_age_membs &lt;- aggregate(NMEMB ~ YEAR + state + AGEGRP + PRIMARYCOND, dat = by_year, sum)
by_year_age &lt;- left_join(by_year_age_visits, by_year_age_membs)
by_year_age &lt;- by_year_age |&gt; mutate(CI_per_hundred = NVISITS/NMEMB *100, state = tolower(state))

#add in region just in case?
state_parts_2 &lt;- state_parts
names(state_parts_2)[1] &lt;- &quot;state&quot;

by_year_age &lt;- left_join(by_year_age, state_parts_2)
#make a plot of trends over time by state


country_by_age &lt;- left_join(aggregate(NVISITS ~ AGEGRP + YEAR, dat = by_year_age, sum), aggregate(NMEMB ~ AGEGRP + YEAR, dat = by_year_age, sum))
country_by_age &lt;- country_by_age |&gt; mutate(CI_per_hundred = NVISITS/NMEMB * 100)

country_by_age |&gt; ggplot(aes(YEAR, CI_per_hundred, group = AGEGRP)) + geom_line(aes(color = AGEGRP)) + ggtitle(&quot;Streptococcal Pharyngitis in the US from 2010-2018 \n By Age Group&quot;) + theme_bw() + ylab(&quot;Cases per 100 People&quot;) + labs(color = &quot;Age Group&quot;)



states_indiv_region &lt;- strep_all_region |&gt; group_by(YEAR, region) |&gt; ggplot(aes(YEAR, CI_per_hundred, group=region)) + geom_line(aes(col = part)) + ggtitle(&quot;Streptococcal Pharyngitis In All States by Region&quot;) + ylab(&quot;Cases per 100 People&quot;) + theme_bw() + labs(color = &quot;Region&quot;)

#now group them by region and just report 1 value per region

by_state_2 &lt;- by_state |&gt; mutate(state = tolower(STATE))
strep_region_visits &lt;- left_join(by_state_2, state_parts_2, by = &quot;state&quot;)
strep_region_visits_agg &lt;- aggregate(visits~ part + YEAR, dat = strep_region_visits, sum)
strep_region_members_agg &lt;- aggregate(members~ part + YEAR, dat = strep_region_visits, sum)
strep_region_joined &lt;- left_join(strep_region_visits_agg, strep_region_members_agg)
strep_region_joined &lt;- strep_region_joined |&gt; mutate(CI_per_hundred = visits/members * 100)

per_region&lt;- strep_region_joined |&gt; group_by(YEAR, part) |&gt; ggplot(aes(YEAR, CI_per_hundred, group=part)) + geom_line(aes(col = part)) + ggtitle(&quot;Streptococcal Pharyngitis By Region&quot;) +ylab(&quot;Cases per 100 People&quot;) + theme_bw() + labs(color = &quot;Region&quot;)

grid.arrange(states_indiv_region, per_region, ncol=2)

#try by month; first just plot data by region for all age groups together
#should be able to just merge these two because the members are stable over the year
by_month_all &lt;- left_join(dat, coh)

#consolidate across sex and check if this is what you needed to do earlier on as well;
#to consolidate across sex, will just need to add so that should be fine 
by_month_age_vis &lt;- aggregate(NVISITS ~ MONTH + STATE + AGEGRP + YEAR, dat = by_month_all, sum)
memb_no_sex &lt;- aggregate(NMEMB ~  STATE +AGEGRP + YEAR, dat = coh, sum)
by_month_no_sex &lt;- left_join(by_month_age_vis, memb_no_sex)
by_month_no_sex &lt;- by_month_no_sex |&gt; mutate(&quot;CI_per_thousand&quot; = NVISITS/NMEMB*1000)



by_month_no_sex_lowercase &lt;- by_month_no_sex |&gt; mutate(&quot;state&quot; = tolower(STATE))
by_month_regions &lt;- left_join(by_month_no_sex_lowercase, state_parts_2, by = &quot;state&quot;)
by_month_regions_only_vis &lt;- aggregate(NVISITS ~ part  + YEAR + MONTH, 
                                       dat = by_month_regions,
                                       sum)
by_month_regions_only_memb &lt;- aggregate(NMEMB ~ part  + YEAR + MONTH, 
                                       dat = by_month_regions,
                                       sum)


by_month_regions_only &lt;- left_join(by_month_regions_only_vis, by_month_regions_only_memb)
by_month_regions_only &lt;- by_month_regions_only |&gt; mutate(&quot;CI_per_thousand&quot; = NVISITS/NMEMB *1000)
by_month_regions_only |&gt; ggplot(aes(x = MONTH, y = CI_per_thousand, group = part)) + 
  geom_line(aes(color = part)) +
  facet_wrap(~YEAR) + ggtitle(&quot;Steptococcal Pharyngitis Cases Incidence by Month \n All Ages, by Region&quot;) + labs(color = &quot;Region&quot;) + ylab(&quot;Cases per 1,000 People&quot;) +scale_x_discrete(limits = c(&quot;JAN&quot;, &quot;FEB&quot;, &quot;MAR&quot;, &quot;APR&quot;, &quot;MAY&quot;, &quot;JUN&quot;, &quot;JUL&quot;, &quot;AUG&quot;, &quot;SEPT&quot;,
                                                                                                                                   &quot;OCT&quot;, &quot;NOV&quot;, &quot;DEC&quot;)) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + theme_bw()</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
